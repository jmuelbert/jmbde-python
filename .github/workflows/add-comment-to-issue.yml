---
# SPDX-FileCopyrightText: GitHub, Inc. and contributors
# SPDX-License-Identifier: MIT
#
name: "Add Comment to Issue"

on: # yamllint disable-line rule:truth
  issues:
    types: [labeled]

permissions:
  contents: read

jobs:
  add-comment:
    runs-on: ubuntu-latest
    permissions:
      issues: write
    
    steps:
      - name: Add comment based on label
        uses: peter-evans/create-or-update-comment@71345be0265236311c031f5c7866368bd1eff043 # v4.0.0
        if: contains(['help wanted', 'good first issue'], github.event.label.name)
        with:
          issue-number: ${{ github.event.issue.number }}
          body: |
            ${{ github.event.label.name == 'help wanted' && '
            This issue is available for anyone to work on.
            ' || '
            This issue is a great way to kick-start your journey with our project, or to make a positive impact on open-source development. Jump in!
            ' }}

            - Read our [Contributing Guidelines](https://github.com/jmuelbert/checkconnect/.github/blob/main/.github/CONTRIBUTING.md)
            - Make sure to **reference** this issue in your pull request

            **:sparkles: Thank you for your contribution! :sparkles:**

  # https://github.com/marketplace/actions/alls-green#why
  verify:
    needs: add-comment
    runs-on: ubuntu-latest
    if: always()
    
    steps:
      - name: Verify job status
        uses: re-actors/alls-green@223e4bb7a751b91f43eda76992bcfbf23b8b0302 # v1.2.2
        with:
          jobs: ${{ toJSON(needs) }}
